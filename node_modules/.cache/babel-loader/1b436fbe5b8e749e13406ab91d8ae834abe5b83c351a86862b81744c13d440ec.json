{"ast":null,"code":"import { reactive, computed } from 'vue';\nimport dynamics from 'dynamics.js';\nexport default {\n  __name: 'PageDraggable',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const headerHeight = 120;\n    let isDragging = false;\n    const start = {\n      x: 0,\n      y: 0\n    };\n    const c = reactive({\n      x: headerHeight,\n      y: headerHeight\n    });\n    const headerPath = computed(() => {\n      return `M0,0 L320,0 320,${headerHeight}Q${c.x},${c.y} 0,${headerHeight}`;\n    });\n    const contentPosition = computed(() => {\n      const dy = c.y - headerHeight;\n      const dampen = dy > 0 ? 2 : 4;\n      return {\n        transform: `translate(0,${dy / dampen}px)`\n      };\n    });\n    function startDrag(e) {\n      e = e.changedTouches ? e.changedTouches[0] : e;\n      isDragging = true;\n      start.x = e.pageX;\n      start.y = e.pageY;\n    }\n    function onDrag(e) {\n      e = e.changedTouches ? e.changedTouches[0] : e;\n      if (isDragging) {\n        c.x = headerHeight + (e.pageX - start.x);\n        const dy = e.pageY - start.y;\n        const dampen = dy > 0 ? 1.5 : 4;\n        c.y = headerHeight + dy / dampen;\n      }\n    }\n    function stopDrag() {\n      if (isDragging) {\n        isDragging = false;\n        dynamics.animate(c, {\n          x: headerHeight,\n          y: headerHeight\n        }, {\n          type: dynamics.spring,\n          duration: 700,\n          friction: 280\n        });\n      }\n    }\n    const __returned__ = {\n      headerHeight,\n      get isDragging() {\n        return isDragging;\n      },\n      set isDragging(v) {\n        isDragging = v;\n      },\n      start,\n      c,\n      headerPath,\n      contentPosition,\n      startDrag,\n      onDrag,\n      stopDrag,\n      reactive,\n      computed,\n      get dynamics() {\n        return dynamics;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","computed","dynamics","headerHeight","isDragging","start","x","y","c","headerPath","contentPosition","dy","dampen","transform","startDrag","e","changedTouches","pageX","pageY","onDrag","stopDrag","animate","type","spring","duration","friction"],"sources":["C:/Users/LENOVO/Documents/GitHub/Vue.js/src/views/common/PageDraggable.vue"],"sourcesContent":["<script setup>\r\nimport { reactive, computed } from 'vue'\r\nimport dynamics from 'dynamics.js'\r\n\r\nconst headerHeight = 120\r\n\r\nlet isDragging = false\r\nconst start = { x: 0, y: 0 }\r\nconst c = reactive({ x: headerHeight, y: headerHeight })\r\n\r\nconst headerPath = computed(() => {\r\n  return `M0,0 L320,0 320,${headerHeight}Q${c.x},${c.y} 0,${headerHeight}`\r\n})\r\n\r\nconst contentPosition = computed(() => {\r\n  const dy = c.y - headerHeight\r\n  const dampen = dy > 0 ? 2 : 4\r\n  return {\r\n    transform: `translate(0,${dy / dampen}px)`\r\n  }\r\n})\r\n\r\nfunction startDrag(e) {\r\n  e = e.changedTouches ? e.changedTouches[0] : e\r\n  isDragging = true\r\n  start.x = e.pageX\r\n  start.y = e.pageY\r\n}\r\n\r\nfunction onDrag(e) {\r\n  e = e.changedTouches ? e.changedTouches[0] : e\r\n  if (isDragging) {\r\n    c.x = headerHeight + (e.pageX - start.x)\r\n    const dy = e.pageY - start.y\r\n    const dampen = dy > 0 ? 1.5 : 4\r\n    c.y = headerHeight + dy / dampen\r\n  }\r\n}\r\n\r\nfunction stopDrag() {\r\n  if (isDragging) {\r\n    isDragging = false\r\n    dynamics.animate(\r\n        c,\r\n        { x: headerHeight, y: headerHeight },\r\n        { type: dynamics.spring, duration: 700, friction: 280 }\r\n    )\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div\r\n      class=\"draggable\"\r\n      @mousedown=\"startDrag\"\r\n      @touchstart=\"startDrag\"\r\n      @mousemove=\"onDrag\"\r\n      @touchmove=\"onDrag\"\r\n      @mouseup=\"stopDrag\"\r\n      @touchend=\"stopDrag\"\r\n      @mouseleave=\"stopDrag\"\r\n  >\r\n    <svg class=\"bg\" width=\"640\" height=\"1020\">\r\n      <path :d=\"headerPath\" fill=\"#3F51B5\"></path>\r\n    </svg>\r\n    <div class=\"header\">Drag Me</div>\r\n    <div class=\"content\" :style=\"contentPosition\">Hello</div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.draggable {\r\n  background-color: #fff;\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\r\n  width: 320px;\r\n  height: 240px;\r\n  overflow: hidden;\r\n  margin: 30px auto;\r\n  position: relative;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  font-weight: 300;\r\n  user-select: none;\r\n  border-radius: 8px;\r\n}\r\n.bg {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 0;\r\n}\r\n.header,\r\n.content {\r\n  position: relative;\r\n  z-index: 1;\r\n  padding: 30px;\r\n  box-sizing: border-box;\r\n}\r\n.header {\r\n  color: #fff;\r\n  height: 120px;\r\n  font-size: 2em;\r\n  font-weight: bold;\r\n}\r\n</style>"],"mappings":"AACA,SAASA,QAAQ,EAAEC,QAAQ,QAAQ,KAAK;AACxC,OAAOC,QAAQ,MAAM,aAAa;;;;;;;IAElC,MAAMC,YAAY,GAAG,GAAG;IAExB,IAAIC,UAAU,GAAG,KAAK;IACtB,MAAMC,KAAK,GAAG;MAAEC,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;IAC5B,MAAMC,CAAC,GAAGR,QAAQ,CAAC;MAAEM,CAAC,EAAEH,YAAY;MAAEI,CAAC,EAAEJ;IAAa,CAAC,CAAC;IAExD,MAAMM,UAAU,GAAGR,QAAQ,CAAC,MAAM;MAChC,OAAQ,mBAAkBE,YAAa,IAAGK,CAAC,CAACF,CAAE,IAAGE,CAAC,CAACD,CAAE,MAAKJ,YAAa,EAAC;IAC1E,CAAC,CAAC;IAEF,MAAMO,eAAe,GAAGT,QAAQ,CAAC,MAAM;MACrC,MAAMU,EAAE,GAAGH,CAAC,CAACD,CAAC,GAAGJ,YAAY;MAC7B,MAAMS,MAAM,GAAGD,EAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;MAC7B,OAAO;QACLE,SAAS,EAAG,eAAcF,EAAE,GAAGC,MAAO;MACxC,CAAC;IACH,CAAC,CAAC;IAEF,SAASE,SAASA,CAACC,CAAC,EAAE;MACpBA,CAAC,GAAGA,CAAC,CAACC,cAAc,GAAGD,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC,GAAGD,CAAC;MAC9CX,UAAU,GAAG,IAAI;MACjBC,KAAK,CAACC,CAAC,GAAGS,CAAC,CAACE,KAAK;MACjBZ,KAAK,CAACE,CAAC,GAAGQ,CAAC,CAACG,KAAK;IACnB;IAEA,SAASC,MAAMA,CAACJ,CAAC,EAAE;MACjBA,CAAC,GAAGA,CAAC,CAACC,cAAc,GAAGD,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC,GAAGD,CAAC;MAC9C,IAAIX,UAAU,EAAE;QACdI,CAAC,CAACF,CAAC,GAAGH,YAAY,IAAIY,CAAC,CAACE,KAAK,GAAGZ,KAAK,CAACC,CAAC,CAAC;QACxC,MAAMK,EAAE,GAAGI,CAAC,CAACG,KAAK,GAAGb,KAAK,CAACE,CAAC;QAC5B,MAAMK,MAAM,GAAGD,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QAC/BH,CAAC,CAACD,CAAC,GAAGJ,YAAY,GAAGQ,EAAE,GAAGC,MAAM;MAClC;IACF;IAEA,SAASQ,QAAQA,CAAA,EAAG;MAClB,IAAIhB,UAAU,EAAE;QACdA,UAAU,GAAG,KAAK;QAClBF,QAAQ,CAACmB,OAAO,CACZb,CAAC,EACD;UAAEF,CAAC,EAAEH,YAAY;UAAEI,CAAC,EAAEJ;QAAa,CAAC,EACpC;UAAEmB,IAAI,EAAEpB,QAAQ,CAACqB,MAAM;UAAEC,QAAQ,EAAE,GAAG;UAAEC,QAAQ,EAAE;QAAI,CAAC,CAC1D;MACH;IACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}